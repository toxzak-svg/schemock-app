const fs = require('fs');
const path = require('path');

// Read the HTML file
const htmlPath = path.join(__dirname, '../src/installer/ui/index.html');
const htmlContent = fs.readFileSync(htmlPath, 'utf-8');

// Escape backticks and dollar signs for template literal
const escapedHtml = htmlContent
  .replace(/\\/g, '\\\\')
  .replace(/`/g, '\\`')
  .replace(/\$/g, '\\$');

// Create the TypeScript template
const tsContent = `// Auto-generated from src/installer/ui/index.html
// Do not edit this file directly

export function getInstallerHTML(): string {
  return \`${escapedHtml}\`;
}
`;

// Write the template file
const outputPath = path.join(__dirname, '../src/installer/ui-template.ts');
fs.writeFileSync(outputPath, tsContent, 'utf-8');

console.log('âœ… UI template created successfully');
